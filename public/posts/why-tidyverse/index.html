<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>data&#43;science/posts/why-tidyverse/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href='/hugo-theme-console/css/terminal-0.7.1.min.css'>
    <link rel="stylesheet" href='/hugo-theme-console/css/animate-3.7.2.min.css'>
    <link rel="stylesheet" href='/hugo-theme-console/css/console.css'>
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    <link rel="icon" 
      type="image/png" 
      href="/favicon-comp.png"><meta property="og:title" content="A Case for the Tidyverse" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/why-tidyverse/" /><meta property="article:published_time" content="2020-04-27T00:00:00+00:00" />



<meta name="twitter:title" content="A Case for the Tidyverse"/>
<meta name="twitter:description" content="The tidyverse is a set of actively developed and well-maintained R packages to facilitate the typical data analysis workflow. Here&rsquo;s why you should use it in your projects."/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="/" class="no-style site-name">data&#43;science</a>:~/ <a href='posts'></a> <a href='/'>posts</a>/<a href='why-tidyverse'></a> <a href='//'>why-tidyverse</a>/
            </header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="/posts/" typeof="ListItem">posts/</a></li>
                
                <li><a href="/resources/" typeof="ListItem">resources/</a></li>
                
                <li><a href="/tags/" typeof="ListItem">tags/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast">
        
<h1>A Case for the Tidyverse</h1>

27 Apr 2020

<br/>

  <link rel="stylesheet" href="tomorrow.css" type="text/css" />

<div id="TOC">
<ul>
<li><a href="#inspiration-and-inception">Inspiration and Inception</a></li>
<li><a href="#tidy-data">Tidy Data</a></li>
<li><a href="#favorite-features">Favorite Features</a><ul>
<li><a href="#tibbles">Tibbles</a></li>
<li><a href="#pipes">Pipes</a></li>
<li><a href="#wrangling">Wrangling</a></li>
<li><a href="#strings-and-factors">Strings and Factors</a></li>
</ul></li>
<li><a href="#tldr">TL;DR</a></li>
</ul>
</div>

<div id="inspiration-and-inception" class="section level2">
<h2>Inspiration and Inception</h2>
<p>The <a href="https://www.tidyverse.org/packages/">tidyverse</a> is a set of actively developed and well-maintained R packages to facilitate the typical data analysis workflow. Most but not all of the core tidyverse packages (there are now 8) were designed by <a href="http://hadley.nz/">Hadley Wickham</a>, chief scientist at RStudio since 2013. His book <em><a href="https://r4ds.had.co.nz/">R for Data Science</a></em> is an incredible resource that is only roughly summarized in this tutorial. Plenty of his talks and interviews are available on YouTube as well; <a href="https://www.youtube.com/watch?v=9YTNYT1maa4">here’s</a> my favorite from the <a href="https://vizbi.org/">VIZBI</a> conference at EMBL last year.</p>
<p>Many R programmers who don’t explicitly know what the tidyverse is have at least used <code>ggplot2</code>, and if they got their start in base R as I did, probably found it annoying because of the slightly different syntax. The inspiration behind it was to be the first open source implementation of <em><a href="https://towardsdatascience.com/a-comprehensive-guide-to-the-grammar-of-graphics-for-effective-visualization-of-multi-dimensional-1f92b4ed4149">The Grammar of Graphics</a></em> (hence <strong>gg</strong>plot), a statistical textbook from the 1980s that provided a concise way to describe a range of data visualizations. Grammar is simply an attribute of language that dictates how elements must be expressed in order to be understood, and where human languages predominately evolve the grammar that distinguishes them functionally, programming languages can be tailored and tweaked.</p>
<p>The goal of <code>ggplot</code> - getting from data to visualization more intuitively - is what paved the way for the rest of the tidyverse. R users who have ever melted or reshaped a data frame might be curious to know that those packages were also Hadley’s work and key predecessors of the <code>dplyr</code> and <code>tidyr</code> packages in the current core tidyverse. As he puts it, very often the key to creating a visualization is about getting the data in the right form, hence the emphasis on data manipulation.</p>
<p><img src="data/data.science.process.png" alt="Figure 1 from R for Data Science" /> <br> The canonical data analysis workflow above also encapsulates my entire job as a researcher: regardless of discipline or motivating question, the work starts with data and ends with communicating something learned from the nonlinear process of exploring that data. The tidyverse attracted me because it offered complete workflow coverage and consistency throughout, which felt like the best way to attain fluency and proficiency. Once I got into it, I realized that the weird syntax that kept me from liking <code>ggplot2</code> a few years ago is exactly what gives it those attractive qualities.</p>
</div>
<div id="tidy-data" class="section level2">
<h2>Tidy Data</h2>
</div>
<div id="favorite-features" class="section level2">
<h2>Favorite Features</h2>
<p>To show my favorite features, let’s load the <strong>mtcars</strong> data frame.</p>
<pre class="r"><code>data(mtcars)
head(mtcars)</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<div id="tibbles" class="section level3">
<h3>Tibbles</h3>
<ul>
<li>tibble and readr</li>
<li>no rownames</li>
<li>shows types</li>
<li>no console overflow</li>
</ul>
<p>Then, let’s transform it to a <a href="https://tibble.tidyverse.org/">tibble</a> and see if you can spot the differences.</p>
<pre class="r"><code>library(tibble)
as_tibble(mtcars)</code></pre>
<pre><code>## # A tibble: 32 x 11
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # … with 22 more rows</code></pre>
<p>Two things should stand out: our rownames are missing and the data type of each column is now displayed in the console. A bit more subtle differences: the full dimensions of the data are printed, and we didn’t need to call <code>head</code> - the first 10 rows were automatically displayed.</p>
</div>
<div id="pipes" class="section level3">
<h3>Pipes</h3>
<ul>
<li>pipe and magrittr</li>
<li>seamless with ggplot syntax</li>
<li>data frame doesn’t always have to be first argument</li>
<li>works with other functions</li>
<li>bit of relative programming, purrr? later?</li>
<li>readability</li>
</ul>
</div>
<div id="wrangling" class="section level3">
<h3>Wrangling</h3>
<ul>
<li>dplyr and tidyr</li>
<li>mutate</li>
<li>gather and spread</li>
<li>nesting and summarizing</li>
</ul>
</div>
<div id="strings-and-factors" class="section level3">
<h3>Strings and Factors</h3>
<ul>
<li>stringr - str_detect with filter</li>
<li>forcats for factors - useful before plotting</li>
<li>ideal for working with two annoying data types</li>
</ul>
</div>
</div>
<div id="tldr" class="section level2">
<h2>TL;DR</h2>
<p>The typical data analysis project is a set of interconnected steps - a workflow - and there are benefits to using programming as a tool throughout, including automation and reproducibility (it’s easy to save and rerun code), as well as the ability to handle more difficult problems later on.</p>
<p>R is an open source programming language already tailored to statistical analysis. Its base implementation enables extensive modelling and visualization and thousands of specialized packages and niches have emerged on top of this (e.g. <code>phyloseq</code> for the microbiome community). The tidyverse is a large initiative to streamline the entire data analysis workflow by encompassing what comes before and after statistical analysis into a coherent set of packages.</p>
<p>It involves learning some new syntax, and some lingo. For light R users, simply investing in tibbles and the pipe (<code>%&gt;%</code>) operator will allow you to interact with your raw data in a less frustrating and error-prone manner and generate more readable code. Similarly, understanding even a little bit how <code>ggplot2</code> was structured will make working with it more intuitive.</p>
<p>For those working extensively in R, committing to that as well as tidy data structures will make you a better, more curious programmer. Especially if you are self-taught, the tidyverse is the quickest path to proficiency for data analysis in R. The <a href="https://tidyverse.tidyverse.org/">documentation</a> is immaculate, there are <a href="https://rstudio.com/resources/cheatsheets/">cheatsheets</a> as well as <a href="https://rstudio.com/resources/books/">deeper resources</a> available, plus an active community on GitHub and Stack Overflow. Mastery of the basics opens up a wealth of more advanced tools that I will advocate for in future posts, like nested list-columns and the <code>purrr</code> package.</p>
<style type="text/css">
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 70%;
    padding: 10px
}
</style>
</div>




        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://www.netlify.com/">Netlify</a>. 
</div>
    </div>
  </body>
</html>
